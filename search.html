<!DOCTYPE html>
<html lang="zh-TW" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobLens - å…¨æ–¹ä½è·å ´é€è¦–ç³»çµ±</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .table-row-anim { transition: all 0.3s ease; }
        .table-row-anim:hover { transform: scale(1.01); z-index: 10; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); }
        .input-focus-effect:focus { box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2); border-color: #10b981; }
        
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f5f9; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 4px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: #94a3b8; }
    </style>
</head>
<body class="text-slate-800">

    <nav class="bg-slate-900 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center gap-2 cursor-pointer" onclick="window.location.href='index.html'">
                <i class="fa-solid fa-magnifying-glass-chart text-emerald-400 text-2xl"></i>
                <span class="text-xl font-bold tracking-wider">JobLens</span>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium">
                <a href="#jobs" class="text-emerald-400 font-bold border-b-2 border-emerald-400 transition">æœ€æ–°è·ç¼º</a>
                <a href="#salary" class="hover:text-emerald-400 transition">è–ªè³‡é€è¦–</a>
                <a href="#leaderboard" class="hover:text-emerald-400 transition">è¶…ç´šæ¯”ä¸€æ¯”</a>
                </div>
        </div>
    </nav>

    <header class="bg-gradient-to-r from-slate-800 to-slate-900 text-white py-10 px-4">
        <div class="container mx-auto text-center max-w-2xl">
            <h1 class="text-2xl md:text-3xl font-bold mb-3">çœ‹è¦‹çœŸå¯¦æ•¸æ“šï¼Œæ‹’çµ•è³‡è¨Šä¸å°ç¨±</h1>
            <div class="relative mt-6">
                <input type="text" value="2330 å°ç£ç©é«”é›»è·¯è£½é€ " readonly 
                       class="w-full p-3 pl-6 rounded-full text-slate-900 shadow-xl focus:outline-none ring-4 ring-emerald-500/50 transition cursor-not-allowed">
                <button class="absolute right-1.5 top-1.5 bg-emerald-500 hover:bg-emerald-600 text-white px-5 py-1.5 rounded-full transition font-medium text-sm">
                    é‡æ–°æœå°‹
                </button>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 space-y-12">
        
        <div class="bg-white rounded-xl shadow-lg p-6 flex flex-col md:flex-row justify-between items-start md:items-center border-l-8 border-emerald-500">
            <div>
                <div class="flex items-center gap-3 mb-1">
                    <h2 class="text-3xl font-bold">å°ç£ç©é«”é›»è·¯è£½é€  (2330)</h2>
                    <span class="bg-slate-200 text-slate-600 px-2 py-1 rounded text-xs font-bold">åŠå°é«”æ¥­ - æ™¶åœ“è£½é€ </span>
                </div>
                <p class="text-slate-500 text-sm">è³‡æ–™å¹´åº¦ï¼š2023 | è³‡æ–™ä¾†æºï¼šå…¬é–‹è³‡è¨Šè§€æ¸¬ç«™</p>
            </div>
            
            <div class="mt-6 md:mt-0 flex flex-col md:flex-row items-end md:items-center gap-3">
                
                <a href="supply-chain.html" class="text-slate-500 hover:text-blue-600 text-sm font-medium transition flex items-center gap-1 group">
                    <span class="group-hover:underline">æ‰€å±¬ç”¢æ¥­éˆ</span> <i class="fa-solid fa-sitemap"></i>
                </a>

                <a href="reviews.html" class="bg-purple-100 text-purple-700 hover:bg-purple-600 hover:text-white px-5 py-2.5 rounded-full font-bold text-sm transition-all shadow-sm flex items-center gap-2 group">
                    <i class="fa-solid fa-robot group-hover:animate-bounce"></i> 
                    æŸ¥çœ‹ AI è¼¿æƒ…åˆ†æ
                </a>
            </div>
        </div>

        <section id="jobs" class="scroll-mt-24">
            <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                <span class="bg-emerald-500 w-2 h-8 rounded-full"></span> æœ€æ–°è·ç¼ºèˆ‡å¾µæ‰ç®¡é“
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <a href="https://careers.tsmc.com/zh_TW/careers/SearchJobs" target="_blank" class="block group">
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex items-center justify-between hover:shadow-md hover:border-emerald-300 transition-all">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 bg-red-50 rounded-full flex items-center justify-center text-red-600 text-2xl group-hover:scale-110 transition-transform">
                                <i class="fa-solid fa-building"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg text-slate-800">å°ç©é›» å®˜æ–¹æ‹›å‹Ÿç¶²ç«™</h4>
                                <p class="text-sm text-slate-500">ç€è¦½æœ€å®Œæ•´çš„è·ç¼ºåˆ—è¡¨èˆ‡æ ¡åœ’å¾µæ‰è³‡è¨Š</p>
                            </div>
                        </div>
                        <div class="text-slate-300 group-hover:text-emerald-500 transition-colors">
                            <i class="fa-solid fa-arrow-up-right-from-square text-xl"></i>
                        </div>
                    </div>
                </a>

                <a href="https://www.104.com.tw/company/a5h92m0?jobsource=google" target="_blank" class="block group">
                    <div class="bg-white rounded-xl shadow-sm border border-slate-200 p-6 flex items-center justify-between hover:shadow-md hover:border-orange-300 transition-all">
                        <div class="flex items-center gap-4">
                            <div class="w-14 h-14 bg-orange-50 rounded-full flex items-center justify-center text-orange-500 text-2xl group-hover:scale-110 transition-transform">
                                <i class="fa-solid fa-briefcase"></i>
                            </div>
                            <div>
                                <h4 class="font-bold text-lg text-slate-800">104 äººåŠ›éŠ€è¡Œ</h4>
                                <p class="text-sm text-slate-500">æŸ¥çœ‹ç†±é–€è·ç¼ºã€è–ªè³‡åˆ†å¸ƒèˆ‡é¢è©¦å¿ƒå¾—</p>
                            </div>
                        </div>
                        <div class="text-slate-300 group-hover:text-orange-500 transition-colors">
                            <i class="fa-solid fa-arrow-up-right-from-square text-xl"></i>
                        </div>
                    </div>
                </a>
            </div>

            <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
                <div class="px-6 py-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center">
                    <h4 class="font-bold text-slate-700">ğŸ”¥ ç†±é–€æ¨è–¦è·ç¼º (å³æ™‚æ›´æ–°)</h4>
                    <span class="text-xs text-slate-400">è³‡æ–™ä¾†æºï¼šå°ç©é›» / 104</span>
                </div>
                <div class="divide-y divide-slate-100">
                    
                    <div class="p-4 flex flex-col md:flex-row justify-between items-start md:items-center hover:bg-slate-50 transition">
                        <div>
                            <h5 class="font-bold text-slate-800 text-base">è¨­å‚™å·¥ç¨‹å¸« (Equipment Engineer)</h5>
                        </div>
                        <a href="https://careers.tsmc.com/zh_TW/careers/JobDetail?jobId=442&source=External%2BCareer%2BSite" target="_blank" class="mt-3 md:mt-0 px-4 py-1.5 bg-emerald-500 text-white text-xs font-bold rounded hover:bg-emerald-600 transition">ç«‹å³æ‡‰å¾µ</a>
                    </div>
                    
                    <div class="p-4 flex flex-col md:flex-row justify-between items-start md:items-center hover:bg-slate-50 transition">
                        <div>
                            <h5 class="font-bold text-slate-800 text-base">è£½ç¨‹æ•´åˆå·¥ç¨‹å¸« (Process Integration Engineer)</h5>
                        </div>
                        <a href="https://careers.tsmc.com/zh_TW/careers/JobDetail?jobId=18722&source=External%2BCareer%2BSite" target="_blank" class="mt-3 md:mt-0 px-4 py-1.5 bg-emerald-500 text-white text-xs font-bold rounded hover:bg-emerald-600 transition">ç«‹å³æ‡‰å¾µ</a>
                    </div>
                    
                    <div class="p-4 flex flex-col md:flex-row justify-between items-start md:items-center hover:bg-slate-50 transition">
                        <div>
                            <h5 class="font-bold text-slate-800 text-base">å„é¡å·¥ç¨‹å¸«/è¡Œæ”¿è·ç¼º (104å°ˆå€)</h5>
                        </div>
                        <a href="https://www.104.com.tw/job/76avm?jobsource=google" target="_blank" class="mt-3 md:mt-0 px-4 py-1.5 bg-emerald-500 text-white text-xs font-bold rounded hover:bg-emerald-600 transition">ç«‹å³æ‡‰å¾µ</a>
                    </div>
                </div>
                <div class="p-3 bg-slate-50 text-center text-xs text-slate-400">
                    é»æ“Šã€Œç«‹å³æ‡‰å¾µã€å°‡å‰å¾€å®˜æ–¹æ‹›å‹Ÿé é¢
                </div>
            </div>
        </section>

        <section id="salary" class="scroll-mt-24">
            <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                <span class="bg-yellow-500 w-2 h-8 rounded-full"></span> è–ªè³‡èˆ‡ç¦åˆ©é€è¦–
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-12 gap-6">
                <div class="md:col-span-8 bg-white rounded-xl shadow-sm p-6 border border-slate-100">
                    <div class="flex justify-between items-center mb-6">
                        <h4 class="text-lg font-bold flex items-center gap-2">
                            <i class="fa-solid fa-sack-dollar text-yellow-500"></i> å¹´åº¦è–ªè³‡çµæ§‹
                        </h4>
                        <span class="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full font-bold">å°è±¡ï¼šéä¸»ç®¡å…¨æ™‚å“¡å·¥</span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                        <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                            <p class="text-slate-500 text-sm mb-1">å¹³å‡æ•¸ (Mean)</p>
                            <p class="text-2xl font-bold text-slate-700">316.7 è¬ / å¹´</p>
                            <p class="text-xs text-slate-400 mt-1">æ˜“å—é«˜è–ªæ¥µç«¯å€¼å½±éŸ¿</p>
                        </div>
                        <div class="bg-emerald-50 p-4 rounded-lg border border-emerald-200">
                            <p class="text-emerald-700 text-sm mb-1 font-bold"><i class="fa-solid fa-bullseye"></i> ä¸­ä½æ•¸ (Median)</p>
                            <p class="text-3xl font-bold text-emerald-700">256.3 è¬ / å¹´</p>
                            <p class="text-xs text-emerald-600 mt-1">æ­¤æ•¸å€¼ä»£è¡¨æœ€çœŸå¯¦çš„ä¸­é–“æ°´æº–</p>
                        </div>
                    </div>
                    
                    <div class="bg-slate-50 p-5 rounded-xl border border-slate-200">
                        <div class="flex flex-col md:flex-row justify-between items-end md:items-center mb-4 gap-4">
                            <div class="w-full md:w-auto">
                                <label class="block text-sm font-bold text-slate-600 mb-1">è¼¸å…¥æ‚¨çš„æœŸæœ›å¹´è–ª (è¬):</label>
                                <div class="relative">
                                    <input type="number" id="user-salary-input" value="150" min="0" step="10" 
                                           oninput="updateSalaryPosition()"
                                           class="input-focus-effect w-full md:w-48 pl-4 pr-10 py-2 rounded-lg border border-slate-300 font-bold text-slate-700 outline-none transition">
                                    <span class="absolute right-3 top-2 text-slate-400 text-sm font-bold">è¬</span>
                                </div>
                            </div>
                            <div class="text-right">
                                <span class="text-xs text-slate-500 block">å…¬å¸ä¸­ä½æ•¸åƒè€ƒ</span>
                                <span class="text-emerald-600 font-bold text-lg">256.3 è¬</span>
                            </div>
                        </div>

                        <div class="w-full bg-slate-200 rounded-full h-6 relative mt-6 mb-2">
                            <div class="absolute left-[70%] -top-2 transform -translate-x-1/2 flex flex-col items-center z-10 group" id="median-marker">
                                <div class="w-1 h-10 bg-emerald-500/50 dashed"></div>
                                <div class="absolute -top-6 bg-emerald-600 text-white text-[10px] px-2 py-0.5 rounded opacity-100 whitespace-nowrap shadow-sm">ä¸­ä½æ•¸</div>
                            </div>
                            <div id="user-bar" class="bg-blue-500 h-6 rounded-full relative transition-all duration-500 ease-out flex items-center justify-end pr-2 shadow-sm" style="width: 40%">
                                <span class="text-[10px] text-white font-bold">YOU</span>
                            </div>
                        </div>
                        <p class="text-xs text-slate-500 mt-4 text-center" id="salary-feedback">æ‚¨çš„æœŸæœ›è–ªè³‡ç´„è½åœ¨è©²å…¬å¸çš„ <span class="font-bold text-blue-600">å¾Œ 30%</span> å€é–“ã€‚</p>
                    </div>
                </div>

                <div class="md:col-span-4 flex flex-col gap-6">
                    <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-100 flex-1">
                        <h4 class="text-lg font-bold flex items-center gap-2 mb-4"><i class="fa-solid fa-users text-purple-500"></i> è·å ´ç’°å¢ƒ</h4>
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-sm text-slate-600">å¥³æ€§ä¸»ç®¡ä½”æ¯”</span>
                            <span class="font-bold text-purple-600">14.6%</span>
                        </div>
                        <div class="w-full bg-slate-100 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width: 14.6%"></div></div>
                        <p class="text-xs text-slate-400 mt-2">ç•¥ä½æ–¼åŒæ¥­å¹³å‡ã€‚</p>
                    </div>
                     <div class="bg-white rounded-xl shadow-sm p-6 border border-slate-100 flex-1">
                        <h4 class="text-lg font-bold flex items-center gap-2 mb-4"><i class="fa-solid fa-gavel text-slate-600"></i> é¢¨éšªå¿«ç¯©</h4>
                        <div class="flex items-start gap-3"><div class="mt-0.5 text-green-500"><i class="fa-solid fa-circle-check"></i></div><p class="text-xs text-slate-500">åç«¶çˆ­è¡Œç‚ºï¼šç„¡è£ç½°ã€‚</p></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="leaderboard" class="scroll-mt-24">
            <h3 class="text-2xl font-bold text-slate-800 mb-6 flex items-center gap-2">
                <span class="bg-blue-500 w-2 h-8 rounded-full"></span> è¶…ç´šæ¯”ä¸€æ¯”ï¼š<span id="lb-title-dynamic" class="text-blue-600">å°ç©é›» vs åŒç”¢æ¥­</span>
            </h3>
            <div class="bg-white rounded-xl shadow-lg overflow-hidden border border-slate-100">
                <div class="p-4 bg-slate-100 border-b border-slate-200 flex flex-col lg:flex-row gap-4 justify-between items-center">
                    <div class="flex items-center gap-2 w-full lg:w-auto">
                        <label class="text-xs font-bold text-slate-500 uppercase whitespace-nowrap"><i class="fa-solid fa-filter mr-1"></i> æ¯”è¼ƒé …ç›®</label>
                        <select id="filter-metric" onchange="renderLeaderboard()" class="w-full lg:w-64 p-2 rounded border border-slate-300 text-sm focus:ring-2 focus:ring-blue-500 focus:outline-none shadow-sm cursor-pointer">
                            <option value="éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)">éæ“”ä»»ä¸»ç®¡è–ªè³‡ä¸­ä½æ•¸</option>
                            <option value="éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)">éæ“”ä»»ä¸»ç®¡è–ªè³‡å¹³å‡æ•¸</option>
                            <option value="å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)">å…¨å“¡å¹³å‡è–ªè³‡</option>
                            <option value="å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)">å“¡å·¥ç¦åˆ©å¹³å‡</option>
                        </select>
                    </div>
                    <div class="flex gap-4 w-full lg:w-auto">
                        <div class="flex items-center gap-2 flex-1">
                            <label class="text-xs font-bold text-slate-500 uppercase">ç¯„åœ</label>
                            <select id="filter-scope" onchange="renderLeaderboard()" class="w-full p-2 rounded border border-slate-300 text-sm cursor-pointer">
                                <option value="industry" selected>åŒç”¢æ¥­ (æ™¶åœ“è£½é€ )</option>
                                <option value="sector">åŒé¡è‚¡ (åŠå°é«”)</option>
                                <option value="all">å…¨ç”¢æ¥­</option>
                            </select>
                        </div>
                        <div class="flex items-center gap-2 flex-1">
                            <label class="text-xs font-bold text-slate-500 uppercase">æ’åº</label>
                            <select id="filter-order" onchange="renderLeaderboard()" class="w-full p-2 rounded border border-slate-300 text-sm cursor-pointer">
                                <option value="desc" selected>ç”±é«˜åˆ°ä½</option>
                                <option value="asc">ç”±ä½åˆ°é«˜</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-slate-50 text-xs font-bold text-slate-500 uppercase border-b border-slate-200">
                            <tr><th class="p-4 w-20 text-center">æ’å</th><th class="p-4">å…¬å¸åç¨±</th><th class="p-4 text-center">ç´°åˆ†ç”¢æ¥­</th><th class="p-4 text-right" id="th-metric-name">æ•¸å€¼</th><th class="p-4 w-32 text-center">ç‹€æ…‹</th></tr>
                        </thead>
                        <tbody id="leaderboard-body" class="text-sm text-slate-700 divide-y divide-slate-100"></tbody>
                    </table>
                </div>
            </div>
        </section>

        <div class="border-t border-slate-200 mt-12 pt-8 text-center text-xs text-slate-400 pb-8">
            <p>JobLens 2025 Beta | æœ¬ç³»çµ±ä½¿ç”¨æ”¿åºœè³‡æ–™é–‹æ”¾å¹³è‡ºæ•¸æ“š</p>
        </div>

    </main>

    <script>
        // 1. Leaderboard Data
        const currentCompanyId = 2330; 
        const rawData = [
            {"å…¬å¸ä»£è™Ÿ":2454,"å…¬å¸åç¨±":"è¯ç™¼ç§‘","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":4978,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":4633,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":4310,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":3438,"ç”¢æ¥­åˆ¥":"ICè¨­è¨ˆ","å¤§é¡":"åŠå°é«”"},
            {"å…¬å¸ä»£è™Ÿ":2379,"å…¬å¸åç¨±":"ç‘æ˜±","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":5056,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":4751,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3915,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":3246,"ç”¢æ¥­åˆ¥":"ICè¨­è¨ˆ","å¤§é¡":"åŠå°é«”"},
            {"å…¬å¸ä»£è™Ÿ":3034,"å…¬å¸åç¨±":"è¯è© ","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3889,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3586,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3521,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":2865,"ç”¢æ¥­åˆ¥":"ICè¨­è¨ˆ","å¤§é¡":"åŠå°é«”"},
            {"å…¬å¸ä»£è™Ÿ":2330,"å…¬å¸åç¨±":"å°ç©é›»","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3633,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3329,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3391,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":2645,"ç”¢æ¥­åˆ¥":"æ™¶åœ“è£½é€ ","å¤§é¡":"åŠå°é«”"},
            {"å…¬å¸ä»£è™Ÿ":2303,"å…¬å¸åç¨±":"è¯é›»","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2265,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2046,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1800,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":1611,"ç”¢æ¥­åˆ¥":"æ™¶åœ“è£½é€ ","å¤§é¡":"åŠå°é«”"},
            {"å…¬å¸ä»£è™Ÿ":3711,"å…¬å¸åç¨±":"æ—¥æœˆå…‰æŠ•æ§","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1950,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1800,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1750,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":1450,"ç”¢æ¥­åˆ¥":"å°è£æ¸¬è©¦","å¤§é¡":"åŠå°é«”"},
            {"å…¬å¸ä»£è™Ÿ":2603,"å…¬å¸åç¨±":"é•·æ¦®","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2909,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2642,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2523,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":2415,"ç”¢æ¥­åˆ¥":"èˆªé‹","å¤§é¡":"èˆªé‹"},
            {"å…¬å¸ä»£è™Ÿ":2609,"å…¬å¸åç¨±":"é™½æ˜","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":3079,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2680,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2342,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":2048,"ç”¢æ¥­åˆ¥":"èˆªé‹","å¤§é¡":"èˆªé‹"},
            {"å…¬å¸ä»£è™Ÿ":2317,"å…¬å¸åç¨±":"é´»æµ·","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2930,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2496,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":2670,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":1937,"ç”¢æ¥­åˆ¥":"çµ„è£ä»£å·¥","å¤§é¡":"é›»å­é›¶çµ„ä»¶"},
            {"å…¬å¸ä»£è™Ÿ":2881,"å…¬å¸åç¨±":"å¯Œé‚¦é‡‘","å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1604,"å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1347,"éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)":1624,"éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)":1293,"ç”¢æ¥­åˆ¥":"é‡‘æ§","å¤§é¡":"é‡‘è"},
        ];

        // 2. Interactive Salary Logic
        const companyMedian = 256.3; 
        function updateSalaryPosition() {
            const inputVal = parseFloat(document.getElementById('user-salary-input').value) || 0;
            const bar = document.getElementById('user-bar');
            const feedback = document.getElementById('salary-feedback');
            
            const maxVal = companyMedian * 2; 
            let percentage = (inputVal / maxVal) * 100;
            if (percentage > 100) percentage = 100;
            if (percentage < 5) percentage = 5; 

            bar.style.width = percentage + '%';
            document.getElementById('median-marker').style.left = (companyMedian / maxVal) * 100 + '%';

            if (inputVal < companyMedian * 0.5) {
                feedback.innerHTML = `æ‚¨çš„æœŸæœ›è–ªè³‡åä½ï¼Œåƒ…ç‚ºå…¬å¸ä¸­ä½æ•¸çš„ <span class="font-bold text-red-500">50%</span> å·¦å³ã€‚`;
                bar.className = "bg-slate-400 h-6 rounded-full relative transition-all duration-500 ease-out flex items-center justify-end pr-2 shadow-sm";
            } else if (inputVal < companyMedian) {
                feedback.innerHTML = `æ‚¨çš„æœŸæœ›è–ªè³‡ç´„è½åœ¨è©²å…¬å¸çš„ <span class="font-bold text-blue-600">å¾Œ 30%</span> å€é–“ã€‚`;
                bar.className = "bg-blue-500 h-6 rounded-full relative transition-all duration-500 ease-out flex items-center justify-end pr-2 shadow-sm";
            } else if (inputVal < companyMedian * 1.3) {
                feedback.innerHTML = `æ‚¨çš„æœŸæœ›è–ªè³‡é«˜æ–¼ä¸­ä½æ•¸ï¼Œå±¬æ–¼ <span class="font-bold text-emerald-600">ä¸­é«˜éš</span> è–ªè³‡æ°´æº–ã€‚`;
                bar.className = "bg-emerald-500 h-6 rounded-full relative transition-all duration-500 ease-out flex items-center justify-end pr-2 shadow-sm";
            } else {
                feedback.innerHTML = `æ‚¨çš„æœŸæœ›è–ªè³‡å±¬æ–¼ <span class="font-bold text-purple-600">é ‚å°–</span> æ°´æº–ï¼Œå¯èƒ½éœ€å…·å‚™è³‡æ·±ç®¡ç†è·èƒ½ã€‚`;
                bar.className = "bg-purple-500 h-6 rounded-full relative transition-all duration-500 ease-out flex items-center justify-end pr-2 shadow-sm";
            }
        }
        updateSalaryPosition();

        // 3. Leaderboard Logic
        function renderLeaderboard() {
            const metricKey = document.getElementById('filter-metric').value;
            const scope = document.getElementById('filter-scope').value;
            const order = document.getElementById('filter-order').value;
            const currentCompany = rawData.find(c => c['å…¬å¸ä»£è™Ÿ'] === currentCompanyId);
            
            // Filter
            let filteredData = rawData;
            let scopeText = "å…¨ç”¢æ¥­";
            if (scope === 'industry') {
                filteredData = rawData.filter(item => item['ç”¢æ¥­åˆ¥'] === currentCompany['ç”¢æ¥­åˆ¥']);
                scopeText = "åŒç”¢æ¥­ (æ™¶åœ“è£½é€ )";
            } else if (scope === 'sector') {
                filteredData = rawData.filter(item => item['å¤§é¡'] === currentCompany['å¤§é¡']);
                scopeText = "åŒé¡è‚¡ (åŠå°é«”)";
            }

            // Sort
            filteredData.sort((a, b) => order === 'desc' ? b[metricKey] - a[metricKey] : a[metricKey] - b[metricKey]);

            // Map Column Names
            const metricNameMap = {
                'éæ“”ä»»ä¸»ç®¡ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡ä¸­ä½æ•¸(ä»Ÿå…ƒ/äºº)': 'è–ªè³‡ä¸­ä½æ•¸ (ä»Ÿå…ƒ)',
                'éæ“”ä»»ä¸»ç®¡è·å‹™ä¹‹å…¨æ™‚å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)': 'éä¸»ç®¡å¹³å‡ (ä»Ÿå…ƒ)',
                'å“¡å·¥è–ªè³‡å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)': 'å…¨å“¡å¹³å‡è–ªè³‡ (ä»Ÿå…ƒ)',
                'å“¡å·¥ç¦åˆ©å¹³å‡æ•¸(ä»Ÿå…ƒ/äºº)': 'å“¡å·¥ç¦åˆ©å¹³å‡ (ä»Ÿå…ƒ)'
            };

            document.getElementById('th-metric-name').innerText = metricNameMap[metricKey];
            document.getElementById('lb-title-dynamic').innerText = `å°ç©é›» vs ${scopeText}`;

            const tbody = document.getElementById('leaderboard-body');
            tbody.innerHTML = '';

            filteredData.forEach((item, index) => {
                const isCurrent = item['å…¬å¸ä»£è™Ÿ'] === currentCompanyId;
                const rowClass = isCurrent ? "bg-emerald-50 border-l-4 border-l-emerald-500 font-bold" : "hover:bg-slate-50";
                const rankColor = index < 3 ? "bg-yellow-400 text-white" : "bg-slate-200 text-slate-500";
                
                const tr = document.createElement('tr');
                tr.className = `table-row-anim border-b border-slate-100 ${rowClass}`;
                tr.innerHTML = `
                    <td class="p-4 text-center"><div class="w-8 h-8 rounded-full flex items-center justify-center mx-auto text-sm font-bold shadow-sm ${rankColor}">${index + 1}</div></td>
                    <td class="p-4"><div class="${isCurrent ? 'text-emerald-900' : 'text-slate-800'}">${item['å…¬å¸åç¨±']} (${item['å…¬å¸ä»£è™Ÿ']})</div></td>
                    <td class="p-4 text-center text-slate-500 text-xs"><span class="bg-slate-100 px-2 py-1 rounded">${item['ç”¢æ¥­åˆ¥']}</span></td>
                    <td class="p-4 text-right font-mono text-base ${isCurrent ? 'text-emerald-600' : 'text-slate-600'}">${item[metricKey].toLocaleString()}</td>
                    <td class="p-4 text-center">${isCurrent ? '<span class="text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-1 rounded-full">Viewing</span>' : ''}${index === 0 ? '<span class="text-xs font-bold text-yellow-600 border border-yellow-400 px-2 py-0.5 rounded-full ml-1">TOP 1</span>' : ''}</td>
                `;
                tbody.appendChild(tr);
            });
        }
        renderLeaderboard();
    </script>
</body>
</html>